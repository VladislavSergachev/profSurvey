<!DOCTYPE html>


<meta charset="utf-8" />

<title>Проф Опрос</title>

<title>Опрос</title>



<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<div id="survey"></div>



<body>
    <div id="body"></div>
</body>

<script type="text/babel">
    class TextQuestion extends React.Component {
        constructor(props) {
            super(props);
            this.text = props.text;
        }

        render() {
            return <div>
                <h1>{this.text}</h1>
                <input type="text" />
            </div>
        }
    }

    class MotivationalComplexData {
        constructor() {
            this.inMotivation = null;
            this.outterPositive = null;
            this.outterNegative = null;
            this.isComplexOptimal = null;
        }

        calculateInMotivation(workingProcSatisfaction, selfRealizationAbility) {

            let val = (workingProcSatisfaction + selfRealizationAbility) / 2;
            return (this.inMotivation = val);
        }

        calculateOutterPositive(moneyAward, selfDevelopDesire, socialPrestigeDemand) {
            let val = (moneyAward + selfDevelopDesire + socialPrestigeDemand) / 3
            return (this.outterPositive = val);
        }

        calculateOutterNegative(criticAvoidingAspiration, troubleAvoidingAspiration) {
            return (this.outterNegative = (criticAvoidingAspiration + troubleAvoidingAspiration) / 2);
        }

        checkIfComplexOptimal() {
            let optimalRelationA = (this.inMotivation > this.outterPositive) && (this.inMotivation > this.outterNegative);
            let optimalRelationB = (this.inMotivation == this.outterPositive) && (this.outterPositive > this.outterNegative);

            return (this.isComplexOptimal = (optimalRelationA || optimalRelationB));
        }
    }

    const canvas = document.getElementById("body");
    const root = ReactDOM.createRoot(canvas);

    var motivComplex = new MotivationalComplexData();

    function onSurveyFinished() {
        motivComplex.calculateInMotivation(surveyResults[questionId.WorkSatifactionMark], surveyResults[questionId.SelfRealizationMark]);
        motivComplex.calculateOutterPositive(surveyResults[questionId.MoneyAwardMark], surveyResults[questionId.SelfDevelopMark], surveyResults[questionId.SocialPrestigeMark]);
        motivComplex.calculateOutterNegative(surveyResults[questionId.CriticAvoidMark], surveyResults[questionId.TroubleAvoidMark]);

        for (let key in surveyResults)
            console.log(key + ": " + surveyResults[key]);

        let isOptimnal = motivComplex.checkIfComplexOptimal();

        var inmot = document.getElementById('body').appendChild(document.createElement('p'));
        inmot.innerHTML = `ВМ: ${motivComplex.inMotivation}`

        var outpos = document.getElementById('body').appendChild(document.createElement('p'));
        outpos.innerHTML = `ВПМ: ${motivComplex.outterPositive}`

        var outneg = document.getElementById('body').appendChild(document.createElement('p'));
        outneg.innerHTML = `ВОМ: ${motivComplex.outterNegative}`


        var opt = document.getElementById('body').appendChild(document.createElement('p'));
        opt.innerHTML = `Комплекс: ${motivComplex.isOptimnal ? "Оптимальный" : "Неоптимальный"}`



    }

    var surveyResults = {};

    class NumericQuestion extends React.Component {
        constructor(props) {
            super(props);

            this.state = { Value: 0 };
            this.text = props.text;
            this.mark = null;

        }

        onMarkChanged(val) {
            this.setState({ Value: val });
            console.log("state is:" + this.state.Value);

            this.props.handleMarkChange(this.state.Value);
        }



        render() {
            return <div>
                <h1>{this.text}</h1>
                <label>Мало</label>

                <input value="1" onClick={() => {this.onMarkChanged(1); console.log(1)}} type="radio" name={this.props.id} />
                <input value="2" onClick={() => {this.onMarkChanged(2); console.log(2)}} type="radio" name={this.props.id} />

                <input value="3" onClick={() => {this.onMarkChanged(3); console.log(3)}} type="radio" name={this.props.id} />
                <input value="4" onClick={() => {this.onMarkChanged(4); console.log(4)}} type="radio" name={this.props.id} />
                <input value="5" onClick={() => {this.onMarkChanged(5); console.log(5)}} type="radio" name={this.props.id} />
                <label>Много</label>

            </div>
        }
    }




    const questionId =
    {
        PersonName: "personInfo",
        MoneyAwardMark: "moneyAwardMark",
        SelfDevelopMark: "selfDevelopMark",
        CriticAvoidMark: "criticAvoidMark",
        TroubleAvoidMark: "troubleAvoidMark",
        SocialPrestigeMark: "socPrestMark",
        WorkSatifactionMark: "selfSatisfMark",
        SelfRealizationMark: "selfRealizeMark"
    };


    function handle(e) {
        console.log("Value is")
        console.log(e);
    }

    root.render(
        <div>
            <TextQuestion text="ФИО" id={questionId.PersonName} />
            <NumericQuestion handleMarkChange={(val) => { surveyResults[questionId.SelfDevelopMark] = val }} text="Стремление к продвижению по работе" id={questionId.SelfDevelopMark} />
            <NumericQuestion handleMarkChange={(val) => { surveyResults[questionId.TroubleAvoidMark] = val }} text="Наказания" id={questionId.TroubleAvoidMark} />
            <NumericQuestion handleMarkChange={(val) => { surveyResults[questionId.CriticAvoidMark] = val }} text="Стремление избежать критики со стороны руководства или коллег" id={questionId.CriticAvoidMark} />
            <NumericQuestion handleMarkChange={(val) => { surveyResults[questionId.SocialPrestigeMark] = val }} text="Соц. престиж" id={questionId.SocialPrestigeMark} />
            <NumericQuestion handleMarkChange={(val) => { surveyResults[questionId.WorkSatifactionMark] = val }} text="Удовлетворение от работы" id={questionId.WorkSatifactionMark} />
            <NumericQuestion handleMarkChange={(val) => { surveyResults[questionId.SelfRealizationMark] = val }} text="Самореализация" id={questionId.SelfRealizationMark} />
            <NumericQuestion handleMarkChange={(val) => { surveyResults[questionId.MoneyAwardMark] = val }} text="Денежный заработок" id={questionId.MoneyAwardMark} />;

            <button onClick={() => onSurveyFinished(root)}>Завершить</button>;
        </div>
    );


</script>